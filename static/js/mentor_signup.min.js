var mentorSignupApp=angular.module("mentorSignupApp",["ngRoute","angularFileUpload","gamecoachShared","gamecoachNavigation"]).config(["$locationProvider",function(a){a.html5Mode(!0)}]),mentorSignupApp=angular.module("mentorSignupApp");mentorSignupApp.controller("MentorSignupController",function(a){var b=function(){var a=new Date;return"/data/mentor/"+c+"/profilePicture?cache="+a.getMilliseconds()},c=angular.element("input[type=hidden][name=system_username]").val();a.profilePictureUri=b(),a.facebookLogin=function(){return allauth.facebook.login("","authenticate","login"),!1},a.steamLogin=function(){var a="/accounts/openid/login/",b="?openid=http://steamcommunity.com/openid",c="&next="+angular.element("input[type=hidden][name=next]").val(),d="";"True"===angular.element().val()&&(d="&process=connect"),window.location=a+b+c+d;try{calq.action.track("Logging in to become a mentor",{})}catch(e){}return!1}}),mentorSignupApp.controller("TopHeroController",function(a,b,c){var d=[];angular.forEach(c.getHeroHash(),function(a,b){d.push({label:a,identifier:b})}),a.topheroes=d}),mentorSignupApp.controller("MentorProfileController",function(a,b,c,d){var e=angular.element("input[type=hidden][name=system_username]").val(),f=function(){var a=new Date;return"/data/mentor/"+e+"/profilePicture?cache="+a.getMilliseconds()};a.profilePictureUri=f(),a.mentor={},a.save=function(c){var d=c.$valid;if(d){try{calq.user.profile(a.mentor)}catch(e){}b.submit(a.mentor)}},a.uploadFile=function(b){d.hide();var e=c.upload(a,b);e.then(function(){a.profilePictureUri=f()},function(a){d.notifyError(a)})}}),mentorSignupApp.controller("ProfilePictureController",function(a,b,c){a.onFileSelect=function(a){angular.forEach(a,function(a){c.upload(a)})}});var mentorSignupApp=angular.module("mentorSignupApp");mentorSignupApp.factory("mentorProfileService",function(a,b,c){return{submit:function(d){return a({url:"/api/mentors/",method:"POST",data:d}).success(function(a,c){if(200===c){try{calq.action.track("Signed up as mentor",{})}catch(d){}var e=b.getRedirectUrl();e?b.redirect(e):window.location=window.location}}).error(function(){c.notifyError("There has been an error submitting your profile")})}}}),mentorSignupApp.factory("profilePictureUploadService",function(a,b,c){return{upload:function(a){b.upload({url:"/api/mentor/profilePicture/",file:a}).progress(function(){}).success(function(){try{calq.action.track("Uploaded profile picture",{})}catch(a){}}).error(function(){try{calq.action.track("Error uploading profile picture",{})}catch(a){}c.notifyError("There has been an error submitting your profile picture")})}}});