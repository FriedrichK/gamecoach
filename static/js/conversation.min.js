var conversationApp=angular.module("conversationApp",["gamecoachShared","gamecoachNavigation"]),conversationApp=angular.module("conversationApp");conversationApp.controller("SubmissionController",function(a,b,c){b.submit=function(){var b=$("input[type=hidden][name=conversationPartner]").val(),d=angular.element("textarea[name=field]").val();d&&""!==d&&c.postMessage(b,d,function(b){200===b.status&&(angular.element("textarea[name=field]").val(""),a.$broadcast("newMessageSuccessfullySent"))})}}),conversationApp.controller("OtherUserProfileController",function(a,b,c,d,e,f,g,h){var i=$("input[type=hidden][name=conversationPartner]").val();BaseProfileController.call(this,a,b,c,d,e,f,g,h,i)}),conversationApp.controller("MessageController",function(a,b,c){var d="123",e=$("input[type=hidden][name=conversationPartner]").val(),f=function(){c.getConversation(d,e,function(b){a.messageStream=b})};angular.element(b).ready(function(){f()}),a.$on("newMessageSuccessfullySent",function(){f()})});var conversationApp=angular.module("conversationApp");conversationApp.factory("conversationService",function(a){return{getConversation:function(b,c,d){return a({url:"/api/conversation/"+c,method:"GET",params:{ident:b}}).then(function(a){d(a.data)})}}}),conversationApp.factory("messageService",function(a){return{postMessage:function(b,c,d){return a({url:"/api/conversation/message/",method:"POST",data:{recipient:b,message:c}}).then(function(a){d(a)})}}});