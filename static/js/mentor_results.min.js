function tokenizeValues(a){return a?String(a).split(","):[]}function processBinaryCategory(a,b,c){if(void 0!==a[b]){var d=tokenizeValues(c);return angular.forEach(d,function(c){void 0!==a[b][c]&&(a[b][c]=!0)}),a[b]}return null}function processChoiceCategory(a,b,c){void 0!==a[b]&&console.log(b,c)}function getInitialRefineSettings(a,b){var c=a.search();return angular.forEach(c,function(a,c){"roles"===c&&(b.roles=processBinaryCategory(b,c,a)),"regions"===c&&(b.regions=processBinaryCategory(b,c,a)),"day"===c&&(b.day=a),"time"===c&&(b.time=a)}),b}var mentorResultsApp=angular.module("mentorResultsApp",["ngAnimate","gamecoachShared","gamecoachNavigation"]).config(["$locationProvider",function(a){a.html5Mode(!0)}]),mentorResultsApp=angular.module("mentorResultsApp");mentorResultsApp.controller("RefineSearchController",function(a,b,c,d,e){angular.element(b).ready(function(){a.refine=e.get(),e.set(a.refine)}),a.change=function(){c.getMatchingMentors(a.refine,function(){}),e.set(a.refine)}}),mentorResultsApp.controller("MentorListController",function(a,b,c){a.number=0,a.$on("refineSettingsUpdated",function(){var d=c.get();b.getMatchingMentors(d,function(b){a.mentors=b,a.number=b.length})}),a.goToProfile=function(a){window.location="/mentor/"+a}});var mentorResultsApp=angular.module("mentorResultsApp");mentorResultsApp.factory("mentorSearchService",function(a,b){return{getMatchingMentors:function(c,d){return a({url:"/api/mentor",method:"GET",params:c}).then(function(a){d(b.postProcess(a.data))})}}}),mentorResultsApp.factory("refineSettingsService",function(a,b,c){var d=c.initialSettings,e=getInitialRefineSettings(b,d);return{set:function(b){e=b,a.$broadcast("refineSettingsUpdated",b)},get:function(){return e}}}),mentorResultsApp.factory("generateUrlService",function(){return{buildFromSettings:function(a){var b="/results",c=[];return c=c.concat(this._buildUrlPart("roles",this._buildCategory("roles",a))),c=c.concat(this._buildUrlPart("regions",this._buildCategory("regions",a))),c=c.concat(this._buildUrlPart("day",this._buildChoiceCategory("day",a))),c=c.concat(this._buildUrlPart("time",this._buildChoiceCategory("time",a))),console.log(c),0===c.length?b:b+"?"+c.join("&")},_buildUrlPart:function(a,b){return b&&""!==b?[a+"="+b]:[]},_buildCategory:function(a,b){var c=[];return angular.forEach(b[a],function(a,b){a===!0&&c.push(b)}),c.join(",")},_buildChoiceCategory:function(a,b){return b[a]}}}),mentorResultsApp.factory("mentorPreviewService",function(a){var b=function(a){return a.data.top_heroes&&a.data.top_heroes!==[]?"Top heroes: "+a.data.top_heroes.join(", "):"No top heroes listed"},c=function(b,c){return c.games_played?"Games played: "+a("number")(c.games_played,0):void 0},d=function(b,c){return c.win_rate?"Win rate: "+a("percentAsString")(c.win_rate):void 0},e=function(b,c){return c.solo_mmr?"Solo MMR: "+a("number")(c.solo_mmr,0):void 0},f=function(a){if(a.data&&a.data.statistics){var b=angular.fromJson(a.data.statistics),f=[c,d,e],g=[];return angular.forEach(f,function(c){var d=c(a,b);d&&g.push(d)}),g.join(" | ")}};return{postProcess:function(a){return angular.forEach(a,function(a){a.data.topHeroText=b(a),a.data.statisticsText=f(a)}),a}}}),mentorResultsApp.factory("mentorSettingsService",function(){return{initialSettings:{roles:{carry:!1,disabler:!1,ganker:!1,initiator:!1,jungler:!1,offlaner:!1,pusher:!1,support:!1},regions:{uswest:!1,useast:!1,euwest:!1,eueast:!1,russia:!1,southamerica:!1,seasia:!1,australia:!1},availability:{day:void 0,time:void 0}}}});